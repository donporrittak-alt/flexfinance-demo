import React,{useEffect,useState}from'react'
import Grid from '@mui/material/Grid'
import Paper from '@mui/material/Paper'
import Typography from '@mui/material/Typography'
import MockAPI from '../mockApi'
import {ResponsiveContainer,LineChart,Line,XAxis,YAxis,Tooltip,CartesianGrid,PieChart,Pie,Cell}from'recharts'
const COLORS=['#00AEEF','#33BFFF','#66D0FF','#99E0FF']
export default function Dashboard(){const[summary,setSummary]=useState(null);useEffect(()=>{MockAPI.getDashboard().then(setSummary)},[]);if(!summary)return null;return(<><Typography variant='h4' gutterBottom>Dashboard</Typography><Grid container spacing={2}>{[['Total Premium Financed',`$${summary.totalPremiumFinanced.toLocaleString()}`],['Active Agreements',summary.activeAgreements],['Delinquent Agreements',summary.delinquentAgreements],['Closed Agreements',summary.closedAgreements],['Average Loan Size',`$${summary.averageLoanSize.toLocaleString()}`],['Monthly Collection Rate',`${summary.monthlyCollectionRate}%`],['New vs Renewal',`${summary.newAgreements} / ${summary.renewals}`]].map(([label,value],idx)=>(<Grid item xs={12} sm={6} md={3} key={idx}><Paper sx={{p:2}}><Typography color='textSecondary'>{label}</Typography><Typography variant='h5'>{value}</Typography></Paper></Grid>))}<Grid item xs={12} md={8}><Paper sx={{p:2,height:320}}><Typography color='textSecondary'>Revenue Trend</Typography><ResponsiveContainer width='100%' height='85%'><LineChart data={summary.seriesRevenue}><CartesianGrid strokeDasharray='3 3'/><XAxis dataKey='name'/><YAxis/><Tooltip/><Line type='monotone' dataKey='v' stroke='#00AEEF' strokeWidth={3} dot={false}/></LineChart></ResponsiveContainer></Paper></Grid><Grid item xs={12} md={4}><Paper sx={{p:2,height:320}}><Typography color='textSecondary'>Premium by Carrier</Typography><ResponsiveContainer width='100%' height='85%'><PieChart><Pie data={summary.byCarrier} dataKey='value' nameKey='name' outerRadius={90} label>{summary.byCarrier.map((e,i)=>(<Cell key={i} fill={COLORS[i%COLORS.length]}/>))}</Pie></PieChart></ResponsiveContainer></Paper></Grid></Grid></>) }
